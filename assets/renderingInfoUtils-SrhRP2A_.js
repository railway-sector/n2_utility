import{d2 as p,d3 as y,at as b}from"./index-BPPwkOiP.js";function f(n,e){if(n.symbol!=null)return n.symbol;const l=e?.renderer;return l!=null&&l.type!=="dot-density"?l.getSymbol(n,e):null}function m(n,e){const l=f(n,e);if(l==null)return null;const a=e?.renderer,o=new p(a,l);if(a==null||!("visualVariables"in a)||!a.visualVariables)return o;const c=y(a,n,e)??[],t=["proportional","proportional","proportional"];for(const{variable:i,value:r}of c)if(r!=null||i.type==="size"&&i.useSymbolValue)switch(i.type){case"color":o.color=r?.toRgba();break;case"size":if(i.target==="outline")o.outlineSize=r;else{const u=i.axis,s=i.useSymbolValue?"symbol-value":r??"proportional";switch(u){case"width":t[0]=s;break;case"depth":t[1]=s;break;case"height":t[2]=s;break;case"width-and-depth":t[0]=t[1]=s;break;default:t[0]=t[1]=t[2]=s}}break;case"opacity":o.opacity=r;break;case"rotation":switch(i.axis){case"tilt":o.tilt=r;break;case"roll":o.roll=r;break;default:o.heading=r}}return t[0]==="proportional"&&t[1]==="proportional"&&t[2]==="proportional"||(o.size=t),o}async function d(n,e){return n.symbol!=null?n.symbol:e?.renderer?.getSymbolAsync(n,e)??null}async function v(n,e){const l=await d(n,e);if(!l)return null;const a=e?.renderer,o=new p(a,l);if(!a||!("visualVariables"in a)||!a.visualVariables)return o;const c=y(a,n,e)??[],t=["proportional","proportional","proportional"];for(const{variable:i,value:r}of c)if(i.type==="color")o.color=b.toUnitRGBA(r);else if(i.type==="size")if(i.target==="outline")o.outlineSize=r;else{const u=i.axis,s=i.useSymbolValue?"symbol-value":r;u==="width"?t[0]=s:u==="depth"?t[1]=s:u==="height"?t[2]=s:t[0]=t[1]=u==="width-and-depth"?s:t[2]=s}else i.type==="opacity"?o.opacity=r:i.type==="rotation"&&i.axis==="tilt"?o.tilt=r:i.type==="rotation"&&i.axis==="roll"?o.roll=r:i.type==="rotation"&&(o.heading=r);return(isFinite(t[0])||isFinite(t[1])||isFinite(t[2]))&&(o.size=t),o}function w(n,e=0){const l=n[e];return typeof l=="number"&&isFinite(l)?l:null}function g(n){for(let e=0;e<3;e++){const l=n[e];if(typeof l=="number")return isFinite(l)?l:0}return 0}export{w as a,v as n,m as r,g as s};
